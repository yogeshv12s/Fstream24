<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Play Files</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<style>
  /* Basic */
  * { box-sizing: border-box; }
  body { margin:0; font-family: Arial, sans-serif; background:#111; color:white; }

  /* Preloader */
  #preloader { position:fixed; inset:0; background:#000; display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:2000; }
  #spinner { width:48px; height:48px; border:5px solid #fff; border-top:5px solid #ff0000; border-radius:50%; animation:spin 1s linear infinite; margin-bottom:10px; }
  @keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }

  /* Video Container */
  .video-section { position:relative; width:100%; max-width:1200px; margin:0 auto; background:black; }
  #stream-media { width:100%; height:auto; max-height:70vh; background:black; display:block; }

  /* Controls */
  .controls { position:absolute; bottom:10px; left:10px; right:10px; display:flex; align-items:center; justify-content:space-between; background: rgba(0,0,0,0.6); padding:5px 10px; border-radius:8px; }
  .controls i { font-size:20px; cursor:pointer; margin-right:10px; }
  #progress-container { flex:1; height:5px; background:rgba(255,255,255,0.3); border-radius:3px; cursor:pointer; margin:0 10px; position:relative; }
  #progress { height:5px; background:#ff0000; width:0%; border-radius:3px; }

  /* Big Play */
  #big-play { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); font-size:70px; color:white; background: rgba(0,0,0,0.5); border-radius:50%; padding:20px; cursor:pointer; z-index:1500; transition:0.3s; }
  #big-play:hover { background: rgba(255,255,255,0.7); color:black; }

  /* Toast */
  #toast { position:fixed; bottom:20px; right:20px; background: rgba(0,0,0,0.8); padding:12px 18px; border-radius:8px; opacity:0; transition:0.5s; z-index:3000; }
  #toast.show { opacity:1; }

  /* Comments Section */
  .comments-section { max-width:1200px; margin:20px auto; padding:15px; background:#1a1a1a; border-radius:8px; }
  .comments-section h3 { margin-bottom:15px; }
  .comment { border-bottom:1px solid rgba(255,255,255,0.1); padding:10px 0; }
  .comment:last-child { border:none; }
  .comment input, .comment textarea { width:100%; padding:8px; margin-top:5px; border-radius:4px; border:none; background:#222; color:white; }

  /* Download Button */
  #download-btn { background:#ff0000; color:white; border:none; padding:10px 20px; border-radius:6px; cursor:pointer; font-size:16px; margin-top:10px; }
  #download-btn:hover { opacity:0.8; }

  /* Watermark */
  .watermark { position:absolute; top:10px; right:10px; width:80px; opacity:0.6; pointer-events:none; }

  /* Responsive */
  @media(max-width:768px){
    #big-play { font-size:50px; padding:15px; }
    .controls i { font-size:16px; margin-right:5px; }
    .watermark { width:60px; }
  }
</style>
</head>
<body>

<!-- Preloader -->
<div id="preloader">
  <div id="spinner"></div>
  <img src="https://chadstreamz.sbs/assets/images/log2.png" style="width:120px;" alt="Logo">
</div>

<!-- Video Section -->
<div class="video-section">
  <video id="stream-media" preload="auto"></video>
  <img src="https://chadstreamz.sbs/assets/images/log2.png" class="watermark">
  <div id="big-play"><i class="fas fa-play"></i></div>
  <div class="controls">
    <i id="play-btn" class="fas fa-play"></i>
    <div id="progress-container"><div id="progress"></div></div>
    <i id="volume-btn" class="fas fa-volume-up"></i>
    <i id="fullscreen-btn" class="fas fa-expand"></i>
    <i id="download-icon" class="fas fa-download"></i>
  </div>
</div>

<!-- Toast -->
<div id="toast">You can download this video</div>

<!-- Comments -->
<div class="comments-section">
  <h3>Comments</h3>
  <div class="comment">
    <strong>User1:</strong>
    <p>Great video!</p>
  </div>
  <div class="comment">
    <strong>User2:</strong>
    <p>Loved the quality.</p>
  </div>
  <div class="comment">
    <strong>Add Comment:</strong>
    <textarea placeholder="Write your comment"></textarea>
    <button style="margin-top:10px;">Post</button>
  </div>
</div>

<!-- Download Button -->
<div style="text-align:center;">
  <button id="download-btn">Download Video</button>
</div>

<script>
var mediaLink = "{{ mediaLink }}"; // replace with your media URL
var video = document.getElementById('stream-media');
var preloader = document.getElementById('preloader');
var bigPlay = document.getElementById('big-play');
var toast = document.getElementById('toast');

if(!mediaLink){ alert('Error: Media URL not provided'); }

video.src = mediaLink;

// Preloader
video.addEventListener('canplaythrough', function(){ setTimeout(()=>preloader.style.display='none',500); });

// Big Play
bigPlay.onclick = function(){ video.play(); bigPlay.style.display='none'; };

// Controls
var playBtn = document.getElementById('play-btn');
playBtn.onclick = function(){ if(video.paused){ video.play(); playBtn.className='fas fa-pause'; }else{ video.pause(); playBtn.className='fas fa-play'; } };

var volumeBtn = document.getElementById('volume-btn');
volumeBtn.onclick = function(){ video.muted = !video.muted; volumeBtn.className = video.muted?'fas fa-volume-mute':'fas fa-volume-up'; };

var fullscreenBtn = document.getElementById('fullscreen-btn');
fullscreenBtn.onclick = function(){ if(!document.fullscreenElement){ video.requestFullscreen(); fullscreenBtn.className='fas fa-compress'; } else{ document.exitFullscreen(); fullscreenBtn.className='fas fa-expand'; } };

// Progress
var progressContainer = document.getElementById('progress-container');
var progress = document.getElementById('progress');
video.addEventListener('timeupdate', function(){ progress.style.width = (video.currentTime/video.duration)*100+'%'; });
progressContainer.addEventListener('click', function(e){ var pos = (e.offsetX / this.offsetWidth); video.currentTime = pos * video.duration; });

// Download
var downloadBtn = document.getElementById('download-btn');
downloadBtn.onclick = function(){ var a=document.createElement('a'); a.href=mediaLink; a.download=''; document.body.appendChild(a); a.click(); document.body.removeChild(a); };

// Download icon
document.getElementById('download-icon').onclick = downloadBtn.onclick;

// Toast notification
setInterval(function(){ toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),4000); },20000);
</script>
</body>
</html>
