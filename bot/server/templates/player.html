<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" 
 href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  body,html { margin:0; padding:0; height:100%; background:#000; font-family:Arial, sans-serif; }
  #player-container { position:relative; width:100%; height:100%; background:#000; overflow:hidden; }
  video { width:100%; height:100%; object-fit:contain; background:black; }

  /* Preloader */
  #preloader {
    position:absolute; inset:0; display:flex; justify-content:center; align-items:center;
    background:#000; z-index:1000;
  }
  .spinner {
    border:5px solid rgba(255,255,255,0.2);
    border-top:5px solid red;
    border-radius:50%;
    width:60px; height:60px;
    animation:spin 1s linear infinite;
  }
  @keyframes spin { 0%{transform:rotate(0);} 100%{transform:rotate(360deg);} }

  /* Watermark */
  .watermark {
    position:absolute; top:15px; right:15px;
    width:100px; opacity:0.6; pointer-events:none;
    z-index:20;
  }

  /* Big Play */
  #big-play {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:70px; color:white; background:rgba(0,0,0,0.5);
    border-radius:50%; padding:25px; cursor:pointer; z-index:30;
    transition:0.3s;
  }
  #big-play:hover { background:white; color:black; }

  /* Controls */
  #controls {
    position:absolute; bottom:0; left:0; right:0;
    background:linear-gradient(to top, rgba(0,0,0,0.8), transparent);
    padding:10px; display:flex; align-items:center; gap:12px;
    opacity:1; transition:opacity 0.5s;
  }
  #controls.hidden { opacity:0; pointer-events:none; }

  #controls i { color:white; font-size:22px; cursor:pointer; }
  #controls i:hover { color:red; }

  #progress-container { flex:1; height:6px; background:rgba(255,255,255,0.3);
    border-radius:3px; cursor:pointer; position:relative; }
  #progress { height:6px; width:0%; background:red; border-radius:3px; }

  #time { color:white; font-size:14px; min-width:100px; text-align:right; }

  /* Responsive */
  @media(max-width:768px){
    #big-play{font-size:50px; padding:18px;}
    #controls i{font-size:18px;}
    .watermark{width:70px;}
  }
</style>
</head>
<body>

<div id="player-container">
  <!-- Preloader -->
  <div id="preloader"><div class="spinner"></div></div>

  <!-- Video -->
  <video id="video"></video>

  <!-- Watermark -->
  <img src="https://chadstreamz.sbs/assets/images/log2.png" class="watermark">

  <!-- Big Play -->
  <div id="big-play"><i class="fas fa-play"></i></div>

  <!-- Controls -->
  <div id="controls">
    <i id="playPause" class="fas fa-play"></i>
    <div id="progress-container"><div id="progress"></div></div>
    <span id="time">00:00 / 00:00</span>
    <i id="volume" class="fas fa-volume-up"></i>
    <i id="fullscreen" class="fas fa-expand"></i>
    <i id="download" class="fas fa-download"></i>
  </div>
</div>

<script>
const video = document.getElementById("video");
const playPause = document.getElementById("playPause");
const bigPlay = document.getElementById("big-play");
const preloader = document.getElementById("preloader");
const controls = document.getElementById("controls");
const progress = document.getElementById("progress");
const progressContainer = document.getElementById("progress-container");
const timeDisplay = document.getElementById("time");
const volumeBtn = document.getElementById("volume");
const fullscreenBtn = document.getElementById("fullscreen");
const downloadBtn = document.getElementById("download");

let mediaLink = "{{ mediaLink }}"; // replace with server logic
video.src = mediaLink;

// Preloader hide
video.addEventListener("canplay", ()=>preloader.style.display="none");

// Play / Pause
function togglePlay(){
  if(video.paused){ video.play(); playPause.className="fas fa-pause"; bigPlay.style.display="none"; }
  else { video.pause(); playPause.className="fas fa-play"; bigPlay.style.display="block"; }
}
playPause.onclick = togglePlay;
bigPlay.onclick = togglePlay;
video.onclick = togglePlay;

// Update progress
video.addEventListener("timeupdate", ()=>{
  let percent = (video.currentTime / video.duration)*100;
  progress.style.width = percent+"%";
  timeDisplay.textContent = format(video.currentTime)+" / "+format(video.duration);
});
function format(t){ let m=Math.floor(t/60); let s=Math.floor(t%60);
  return `${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`; }

// Seek
progressContainer.addEventListener("click",(e)=>{
  let pos = (e.offsetX / progressContainer.offsetWidth) * video.duration;
  video.currentTime = pos;
});

// Volume
volumeBtn.onclick=()=>{
  video.muted=!video.muted;
  volumeBtn.className= video.muted? "fas fa-volume-mute":"fas fa-volume-up";
};

// Fullscreen
fullscreenBtn.onclick=()=>{
  if(!document.fullscreenElement){ video.requestFullscreen(); fullscreenBtn.className="fas fa-compress"; }
  else { document.exitFullscreen(); fullscreenBtn.className="fas fa-expand"; }
};

// Download
downloadBtn.onclick=()=>{
  let a=document.createElement("a"); a.href=mediaLink; a.download="video.mp4";
  document.body.appendChild(a); a.click(); a.remove();
};

// Auto-hide controls
let hideTimeout;
function showControls(){
  controls.classList.remove("hidden");
  clearTimeout(hideTimeout);
  hideTimeout = setTimeout(()=>controls.classList.add("hidden"),3000);
}
document.addEventListener("mousemove",showControls);
document.addEventListener("keydown",showControls);
video.addEventListener("play",showControls);
video.addEventListener("pause",()=>controls.classList.remove("hidden"));
showControls();
</script>
</body>
</html>
