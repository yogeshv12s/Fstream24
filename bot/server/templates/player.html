<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Play Files</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<style>
  html, body {
    margin:0; height:100%; background:#000;
    font-family: Arial, sans-serif;
    overflow:hidden;
  }
  #stream-media { 
    width:100%; height:100%; 
    background:black; 
    display:block; 
    object-fit:cover;
  }

  #error-message {
    color:red; font-size:24px; text-align:center; margin-top:20px;
  }

  /* Netflix-style watermark (logo top-left) */
  .mejs-watermark {
    position: absolute;
    top: 15px;
    left: 20px;
    height: 35px;
    opacity: 0.9;
    z-index: 1000;
    pointer-events: none;
  }

  /* Control Bar - Netflix style */
  #control-bar {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    background: linear-gradient(transparent, rgba(0,0,0,0.8));
    display: flex;
    align-items: center;
    padding: 15px 20px;
    z-index: 1000;
    opacity:0;
    transition: opacity 0.5s;
  }

  body:hover #control-bar { opacity:1; }

  #control-bar i {
    color: white;
    font-size: 22px;
    cursor: pointer;
    margin-right: 15px;
    transition: 0.2s;
  }
  #control-bar i:hover { color: #ff0000; }

  #progress-container {
    flex: 1;
    height: 5px;
    background: rgba(255,255,255,0.2);
    border-radius: 3px;
    cursor: pointer;
    margin: 0 15px;
    position: relative;
  }
  #progress {
    height: 5px;
    background: #e50914; /* Netflix red */
    width: 0%;
    border-radius: 3px;
  }

  #time-display {
    color:white;
    font-size:14px;
    white-space: nowrap;
  }

  /* Big Play Button */
  #big-play {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 80px;
    color: white;
    background: rgba(0,0,0,0.5);
    border-radius: 50%;
    padding: 25px;
    cursor: pointer;
    z-index: 1500;
    transition: 0.3s;
  }
  #big-play:hover { background: rgba(229,9,20,0.8); }

  /* Toast Notification */
  #toast {
    position: fixed;
    bottom: 20px; right: 20px;
    background: rgba(0,0,0,0.9);
    color: white;
    padding: 12px 18px;
    border-radius: 6px;
    font-size: 14px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease;
    z-index: 3000;
  }
  #toast.show { opacity: 1; }

  /* Responsive */
  @media(max-width:768px){
    .mejs-watermark { height: 25px; }
    #control-bar i { font-size:18px; margin-right:10px; }
    #big-play { font-size:50px; padding:15px; }
  }
</style>
</head>
<body>

<video id="stream-media" preload="auto"></video>
<div id="error-message"></div>

<!-- Big Play -->
<div id="big-play"><i class="fas fa-play"></i></div>

<!-- Toast -->
<div id="toast">Press play to start watching</div>

<script>
var mediaLink = "{{ mediaLink }}"; // replace with your media URL

if(mediaLink){
  var video = document.getElementById('stream-media');
  var bigPlay = document.getElementById("big-play");
  var toast = document.getElementById("toast");

  video.src = mediaLink;

  bigPlay.onclick = function(){
    video.play();
    bigPlay.style.display="none";
  };

  video.addEventListener("play", ()=>bigPlay.style.display="none");

  // Toast auto show
  setTimeout(function(){
    toast.classList.add("show");
    setTimeout(()=>toast.classList.remove("show"), 3000);
  }, 1500);

  // Create watermark
  var watermark = document.createElement('img');
  watermark.src = 'https://upload.wikimedia.org/wikipedia/commons/7/75/Netflix_icon.svg';
  watermark.className = 'mejs-watermark';
  document.body.appendChild(watermark);

  // Control bar
  var controlBar = document.createElement('div'); controlBar.id = 'control-bar'; document.body.appendChild(controlBar);
  var playBtn = document.createElement('i'); playBtn.className='fas fa-play'; controlBar.appendChild(playBtn);

  playBtn.onclick = function(){
    if(video.paused){ video.play(); playBtn.className='fas fa-pause'; }
    else { video.pause(); playBtn.className='fas fa-play'; }
  };

  var progressContainer = document.createElement('div'); progressContainer.id='progress-container';
  var progress = document.createElement('div'); progress.id='progress'; progressContainer.appendChild(progress);
  controlBar.appendChild(progressContainer);

  let isDragging = false;
  function updateProgress(e){
    var rect = progressContainer.getBoundingClientRect();
    var pos = Math.min(Math.max(0, (e.clientX - rect.left)), rect.width) / rect.width;
    video.currentTime = pos * video.duration;
  }
  progressContainer.addEventListener('mousedown', (e)=>{ isDragging=true; updateProgress(e); });
  progressContainer.addEventListener('mousemove', (e)=>{ if(isDragging) updateProgress(e); });
  progressContainer.addEventListener('mouseup', (e)=>{ if(isDragging){ updateProgress(e); isDragging=false; } });

  var timeDisplay = document.createElement('span'); timeDisplay.id='time-display'; timeDisplay.textContent='00:00 / 00:00';
  controlBar.appendChild(timeDisplay);

  video.addEventListener('timeupdate', function(){
    if(video.duration){
      progress.style.width = (video.currentTime / video.duration) * 100 + '%';
      function formatTime(t){ var m=Math.floor(t/60).toString().padStart(2,'0'); var s=Math.floor(t%60).toString().padStart(2,'0'); return m+':'+s; }
      timeDisplay.textContent = formatTime(video.currentTime)+' / '+formatTime(video.duration);
    }
  });

}else{
  document.getElementById('error-message').textContent = 'Error: Media URL not provided';
}
</script>
</body>
</html>
